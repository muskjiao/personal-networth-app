<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ªäººèµ„äº§è´Ÿå€ºè¡¨ä¸å‡€å€¼ç®¡ç†ç³»ç»Ÿ</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        /* æ·±è‰²èƒŒæ™¯ */
        body { background-color: #0f172a; color: #e2e8f0; font-family: 'Inter', sans-serif; }
        .card { background-color: #1e293b; border-radius: 12px; padding: 20px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .input-dark { background: #334155; border: 1px solid #475569; color: white; padding: 8px; border-radius: 6px; width: 100%; }
        .btn { padding: 8px 16px; border-radius: 6px; cursor: pointer; transition: 0.2s; font-weight: bold; }
        .btn-primary { background: #3b82f6; color: white; }
        .btn-primary:hover { background: #2563eb; }
        .btn-danger { background: #ef4444; color: white; }
        
        /* é¢œè‰²åè½¬ï¼šçº¢æ¶¨ç»¿è·Œ (èµ„äº§å¢å€¼ä¸ºçº¢è‰²) */
        .up { color: #ef4444; }    
        .down { color: #22c55e; }  
        
        /* çªå‡ºæ˜¾ç¤ºçš„å‡€å€¼å’Œè´Ÿå€ºå¡ç‰‡æ ·å¼ */
        .large-metric { padding: 10px 0; border-radius: 8px; margin-top: 5px; }
        .large-metric .value { font-size: 3rem; font-weight: 700; margin-top: 5px; }
    </style>
</head>
<body>

<div id="app" class="p-6 max-w-7xl mx-auto">
    
    <div class="flex justify-between items-center mb-4">
        <div>
            <h1 class="text-2xl font-bold text-white">ä¸ªäººèµ„äº§è´Ÿå€ºè¡¨ä¸å‡€å€¼ç®¡ç†</h1>
            <p class="text-slate-400 text-sm">æ•°æ®å®‰å…¨ï¼šå…¨éƒ¨å­˜å‚¨äºæµè§ˆå™¨æœ¬åœ°</p>
        </div>
        <div class="flex gap-2">
            <button @click="exportData" class="btn bg-slate-600 hover:bg-slate-500 text-white text-sm">å¯¼å‡ºå¤‡ä»½</button>
            <button @click="triggerImport" class="btn bg-slate-600 hover:bg-slate-500 text-white text-sm">å¯¼å…¥æ•°æ®</button>
            <input type="file" id="fileInput" @change="importData" style="display:none">
        </div>
    </div>
    
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6">
        <div class="card border-l-4 border-blue-500">
            <div class="text-slate-400 text-md">å½“å‰å‡€èµ„äº§ (èµ„äº§ - è´Ÿå€º)</div>
            <div class="large-metric text-white">
                <div class="value">{{ formatCurrency(latestNetWorth) }}</div>
            </div>
        </div>
        <div class="card border-l-4 border-red-500">
            <div class="text-slate-400 text-md">å½“å‰æ€»è´Ÿå€º</div>
            <div class="large-metric text-red-400">
                <div class="value">{{ formatCurrency(latestTotalLiabilities) }}</div>
            </div>
        </div>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
        <div class="card">
            <div class="text-slate-400 text-sm">æ€»èµ„äº§</div>
            <div class="text-2xl font-bold text-white mt-1">{{ formatCurrency(latestTotalAssets) }}</div>
        </div>
        <div class="card">
            <div class="text-slate-400 text-sm">å‡€å€¼è¾ƒæ˜¨æ—¥æ¶¨è·Œé¢</div>
            <div class="text-2xl font-bold mt-1" :class="getDiffClass(dayChange)">{{ formatCurrency(dayChange) }}</div>
            <div class="mt-2 text-sm text-slate-500">
                æ¶¨è·Œå¹…: <span :class="getDiffClass(dayChangePct)">{{ dayChangePct }}%</span>
            </div>
        </div>
        <div class="card">
            <div class="text-slate-400 text-sm">å‡€å€¼æœˆç¯æ¯” (è¿‘30å¤©)</div>
            <div class="text-2xl font-bold mt-1" :class="getDiffClass(monthChange)">{{ formatCurrency(monthChange) }}</div>
            <div class="mt-2 text-sm text-slate-500">
                æ¶¨è·Œå¹…: <span :class="getDiffClass(monthChangePct)">{{ monthChangePct }}%</span>
            </div>
        </div>
        <div class="card">
            <div class="text-slate-400 text-sm">å‡€å€¼å¹´åŒæ¯” (è¿‘365å¤©)</div>
            <div class="text-2xl font-bold mt-1 text-slate-500">---</div>
            <div class="mt-2 text-sm text-slate-500">å¾…è¡¥å……</div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
        <div class="card lg:col-span-2 h-96" id="netWorthChart"></div>
        <div class="card h-96" id="compositionChart"></div>
    </div>

    <div class="card overflow-x-auto mb-6">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold">å†å²å‡€å€¼è®°å½•</h3>
            <button @click="clearAll" class="text-xs text-red-400 underline">æ¸…ç©ºæ‰€æœ‰æ•°æ®</button>
        </div>
        <table class="w-full text-sm text-left text-slate-300">
            <thead class="text-xs uppercase bg-slate-700 text-slate-300">
                <tr>
                    <th class="px-4 py-3">æ—¥æœŸ</th>
                    <th class="px-4 py-3 text-right">æ€»èµ„äº§</th>
                    <th class="px-4 py-3 text-right">æ€»è´Ÿå€º</th>
                    <th class="px-4 py-3 text-right">å‡€å€¼</th>
                    <th class="px-4 py-3 text-right">æ—¥æ¶¨è·Œ</th>
                    <th class="px-4 py-3 text-center">æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="(record, index) in sortedHistory" :key="record.date" class="border-b border-slate-700 hover:bg-slate-800">
                    <td class="px-4 py-3">{{ record.date }}</td>
                    <td class="px-4 py-3 text-right text-blue-400">{{ formatCurrency(record.totalAssets) }}</td>
                    <td class="px-4 py-3 text-right text-red-400">{{ formatCurrency(record.totalLiabilities) }}</td>
                    <td class="px-4 py-3 text-right font-bold text-white">{{ formatCurrency(record.netWorth) }}</td>
                    <td class="px-4 py-3 text-right">
                        <span v-if="index < sortedHistory.length - 1" :class="getDiffClass(record.netWorth - sortedHistory[index+1].netWorth)">
                            {{ formatCurrency(record.netWorth - sortedHistory[index+1].netWorth) }}
                        </span>
                        <span v-else>-</span>
                    </td>
                    <td class="px-4 py-3 text-center">
                        <button @click="editRecord(record.date)" class="text-blue-400 hover:text-blue-300 mr-2">ç¼–è¾‘</button>
                        <button @click="deleteRecord(record.date)" class="text-red-400 hover:text-red-300">åˆ é™¤</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <div class="card">
        <h3 class="text-lg font-bold mb-4 border-b border-slate-700 pb-2">ğŸ“… æ•°æ®å½•å…¥ä¸ä¿®æ”¹</h3>
        
        <div class="flex items-center gap-4 mb-4">
            <label class="text-sm">é€‰æ‹©æ—¥æœŸ:</label>
            <input type="date" v-model="selectedDate" class="input-dark w-48">
            <button @click="loadInputData" class="btn bg-slate-600 hover:bg-slate-500 text-white text-sm">åŠ è½½/æ–°å»ºè®°å½•</button>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div>
                <h4 class="font-semibold text-blue-400 mb-3">âœ… èµ„äº§å½•å…¥ (æ€»è®¡: {{ formatCurrency(currentInputAssetsTotal) }})</h4>
                <div v-for="group in config.assetGroups" :key="group.name" class="mb-4 p-3 bg-slate-700 rounded">
                    <h5 class="text-sm font-bold mb-2">{{ group.name }}</h5>
                    <div class="grid grid-cols-3 gap-3">
                        <div v-for="acc in group.accounts" :key="acc.key">
                            <label class="block text-xs text-slate-400 mb-1">{{ acc.name }}</label>
                            <input type="number" step="0.01" v-model.number="inputData.assets[acc.key]" class="input-dark" placeholder="0.00">
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <h4 class="font-semibold text-red-400 mb-3">âŒ è´Ÿå€ºå½•å…¥ (æ€»å‰©ä½™: {{ formatCurrency(currentInputLiabilitiesTotal) }})</h4>
                <div v-for="group in config.liabilityGroups" :key="group.name" class="mb-4 p-3 bg-slate-700 rounded">
                    <h5 class="text-sm font-bold mb-2">{{ group.name }}</h5>
                    <div class="grid grid-cols-3 gap-3">
                        <div v-for="field in group.fields" :key="field.key">
                            <label class="block text-xs text-slate-400 mb-1">{{ field.name }}</label>
                            <input type="number" step="0.01" v-model.number="inputData.liabilities[group.key][field.key]" class="input-dark" placeholder="0.00">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button @click="submitData" class="btn btn-primary w-full mt-4 h-10">ä¿å­˜/æ›´æ–° {{ selectedDate }} çš„è®°å½•</button>
    </div>

</div>

<script>
    // --- æ ¸å¿ƒé…ç½®ï¼šå¯æ‰‹åŠ¨ä¿®æ”¹åç§°å’Œé¡ºåº ---
    
    // ç»Ÿä¸€çš„è´Ÿå€ºå­—æ®µå®šä¹‰
    const commonLiabilityFields = [
        { name: 'æ€»å€Ÿè´·é‡‘é¢', key: 'total_loan' },
        { name: 'æœˆè¿˜æ¬¾é¢', key: 'monthly_payment' },
        { name: 'è¿˜æ¬¾æ—¶é•¿ (æœˆ)', key: 'duration' },
        { name: 'è¿˜æ¬¾å‰©ä½™é‡‘é¢', key: 'remaining_amount' },
        { name: 'æ€»å·²è¿˜é‡‘é¢', key: 'total_paid' },
    ];
    
    const INITIAL_CONFIG = {
        // èµ„äº§é…ç½®
        assetGroups: [
            { name: 'è¯åˆ¸æŠ•èµ„', key: 'securities', accounts: [
                { name: 'å¹³å®‰', key: 'pingan' }, 
                { name: 'é•¿æ¡¥', key: 'longbridge' }, 
                { name: 'è€è™', key: 'tiger' },
                { name: 'æ¬§æ˜“', key: 'okx' },
                { name: 'å¸å®‰', key: 'binance' },
            ]},
            { name: 'æ´»æœŸèµ„äº§', key: 'liquid', accounts: [
                { name: 'æ”¯ä»˜å®', key: 'alipay' },
                { name: 'å¾®ä¿¡', key: 'wechat' },
                { name: 'é“¶è¡Œå¡', key: 'bank' },
                { name: 'å…¶å®ƒ', key: 'other' },
            ]},
        ],
        // è´Ÿå€ºé…ç½®
        liabilityGroups: [
            { name: 'æˆ¿è´·', key: 'mortgage', fields: commonLiabilityFields },
            { name: 'è½¦è´·', key: 'car_loan', fields: commonLiabilityFields },
            { name: 'é—ªç”µè´·', key: 'flash_loan', fields: commonLiabilityFields },
            { name: 'å…¶å®ƒå€Ÿè´·', key: 'other_loan', fields: commonLiabilityFields },
        ]
    };

    // --- Vue App ---
    const { createApp, ref, computed, onMounted, nextTick, watch } = Vue;

    createApp({
        setup() {
            const config = ref(INITIAL_CONFIG);
            const historyData = ref([]);
            const selectedDate = ref(new Date().toISOString().split('T')[0]);
            
            // åˆå§‹åŒ–è¾“å…¥æ•°æ®ç»“æ„
            const createEmptyInputData = () => {
                const assets = {};
                config.value.assetGroups.forEach(g => g.accounts.forEach(a => assets[a.key] = 0));
                
                const liabilities = {};
                config.value.liabilityGroups.forEach(g => {
                    liabilities[g.key] = {};
                    g.fields.forEach(f => liabilities[g.key][f.key] = 0);
                });

                return { assets, liabilities };
            };

            const inputData = ref(createEmptyInputData());

            // --- è®¡ç®—å±æ€§ ---

            const totalAssets = (record) => {
                if (!record || !record.assets) return 0;
                return Object.values(record.assets).reduce((sum, val) => sum + (parseFloat(val) || 0), 0);
            };

            const totalLiabilities = (record) => {
                if (!record || !record.liabilities) return 0;
                let total = 0;
                // è´Ÿå€ºåªç»Ÿè®¡å‰©ä½™è¿˜æ¬¾é‡‘é¢ï¼Œæ–¹ä¾¿è®¡ç®—å‡€å€¼
                config.value.liabilityGroups.forEach(g => {
                    const remaining = record.liabilities[g.key]?.remaining_amount;
                    total += parseFloat(remaining) || 0;
                });
                return total;
            };

            const netWorth = (record) => {
                return totalAssets(record) - totalLiabilities(record);
            };

            const computedHistory = computed(() => {
                return historyData.value.map(record => ({
                    ...record,
                    totalAssets: totalAssets(record),
                    totalLiabilities: totalLiabilities(record),
                    netWorth: netWorth(record)
                }));
            });

            const sortedHistory = computed(() => {
                return [...computedHistory.value].sort((a, b) => new Date(b.date) - new Date(a.date));
            });

            const latestRecord = computed(() => sortedHistory.value[0] || null);

            const latestTotalAssets = computed(() => totalAssets(latestRecord.value));
            const latestTotalLiabilities = computed(() => totalLiabilities(latestRecord.value));
            const latestNetWorth = computed(() => netWorth(latestRecord.value));

            const currentInputAssetsTotal = computed(() => totalAssets(inputData.value));
            const currentInputLiabilitiesTotal = computed(() => totalLiabilities(inputData.value));

            // --- æ ¸å¿ƒæŒ‡æ ‡è®¡ç®—é€»è¾‘ ---
            const calculateChange = (daysAgo) => {
                if (!latestRecord.value) return { amount: 0, pct: 0 };
                
                let prevRecord;
                if (daysAgo === 1) {
                    prevRecord = sortedHistory.value[1]; // æ—¥æ¶¨è·Œï¼šä¸Šä¸€ä¸ªè®°å½•
                } else {
                    // ç¯æ¯”/åŒæ¯”ï¼šæ‰¾åˆ°æœ€æ¥è¿‘ X å¤©å‰çš„è®°å½•
                    const targetDate = new Date(latestRecord.value.date);
                    targetDate.setDate(targetDate.getDate() - daysAgo);

                    prevRecord = historyData.value
                        .filter(r => new Date(r.date) <= targetDate)
                        .sort((a, b) => new Date(b.date) - new Date(a.date))[0];
                }

                if (!prevRecord) return { amount: 0, pct: 0 };

                const prevNetWorth = netWorth(prevRecord);
                const diff = latestNetWorth.value - prevNetWorth;
                const pct = prevNetWorth !== 0 ? ((diff / prevNetWorth) * 100).toFixed(2) : 0;
                return { amount: diff, pct: pct };
            };

            const dayStats = computed(() => calculateChange(1));
            const monthStats = computed(() => calculateChange(30)); 

            // --- æ ¼å¼åŒ–å·¥å…· ---
            const formatCurrency = (val) => {
                if(val === undefined || val === null) return '0.00';
                return new Intl.NumberFormat('zh-CN', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(val);
            };

            // çº¢æ¶¨ç»¿è·Œ (å‡€å€¼ä¸Šæ¶¨ä¸ºçº¢è‰²ï¼Œå‡€å€¼ä¸‹è·Œä¸ºç»¿è‰²)
            const getDiffClass = (val) => {
                if (val > 0) return 'up';   // çº¢æ¶¨
                if (val < 0) return 'down'; // ç»¿è·Œ
                return 'text-slate-400';
            };

            // --- ä¸šåŠ¡é€»è¾‘ ---
            const loadData = () => {
                const saved = localStorage.getItem('balance_sheet_data');
                if (saved) {
                    historyData.value = JSON.parse(saved);
                }
                loadInputData(); // åˆå§‹åŠ è½½ä»Šæ—¥æ•°æ®
                renderCharts();
            };

            const saveData = () => {
                localStorage.setItem('balance_sheet_data', JSON.stringify(historyData.value));
                renderCharts();
            };

            const loadInputData = () => {
                const record = historyData.value.find(r => r.date === selectedDate.value);
                if (record) {
                    // åŠ è½½å·²æœ‰è®°å½•
                    // æ·±åº¦æ‹·è´ï¼Œé˜²æ­¢ç›´æ¥ä¿®æ”¹å†å²æ•°æ®
                    inputData.value = JSON.parse(JSON.stringify(record)); 
                } else {
                    // åˆå§‹åŒ–ç©ºæ•°æ®
                    inputData.value = createEmptyInputData();
                }
            };
            
            const editRecord = (date) => {
                selectedDate.value = date;
                loadInputData();
            }

            const submitData = () => {
                const date = selectedDate.value;
                
                // æ ¡éªŒåŸºç¡€æ•°æ®å®Œæ•´æ€§
                if (currentInputAssetsTotal.value === 0 && currentInputLiabilitiesTotal.value === 0) {
                    alert("èµ„äº§å’Œè´Ÿå€ºä¸èƒ½åŒæ—¶ä¸ºé›¶ï¼Œè¯·æ£€æŸ¥è¾“å…¥ã€‚");
                    return;
                }

                const record = JSON.parse(JSON.stringify({ date, ...inputData.value }));

                const existingIndex = historyData.value.findIndex(r => r.date === date);

                if (existingIndex !== -1) {
                    historyData.value[existingIndex] = record;
                    alert(`è®°å½• ${date} å·²æ›´æ–°!`);
                } else {
                    historyData.value.push(record);
                    alert(`è®°å½• ${date} å·²åˆ›å»º!`);
                }

                // æ’åºå¹¶ä¿å­˜
                historyData.value.sort((a, b) => new Date(a.date) - new Date(b.date));
                saveData();
            };

            const deleteRecord = (date) => {
                if(confirm(`ç¡®å®šåˆ é™¤ ${date} è¿™æ¡è®°å½•å—ï¼Ÿ`)) {
                    historyData.value = historyData.value.filter(r => r.date !== date);
                    saveData();
                }
            };
            
            const clearAll = () => {
                if(confirm('å±é™©æ“ä½œï¼šè¿™å°†æ¸…ç©ºæ‰€æœ‰å†å²æ•°æ®ï¼')) {
                    historyData.value = [];
                    saveData();
                    inputData.value = createEmptyInputData();
                }
            }
            
            // --- å¯¼å…¥å¯¼å‡º ---
            const exportData = () => {
                const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(historyData.value));
                const downloadAnchorNode = document.createElement('a');
                downloadAnchorNode.setAttribute("href", dataStr);
                downloadAnchorNode.setAttribute("download", "balancesheet_backup_" + new Date().toISOString().split('T')[0] + ".json");
                document.body.appendChild(downloadAnchorNode);
                downloadAnchorNode.click();
                downloadAnchorNode.remove();
            };

            const triggerImport = () => document.getElementById('fileInput').click();

            const importData = (event) => {
                const file = event.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const imported = JSON.parse(e.target.result);
                        if (Array.isArray(imported)) {
                            historyData.value = imported;
                            saveData();
                            alert("å¯¼å…¥æˆåŠŸï¼");
                        } else {
                            alert("æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®");
                        }
                    } catch (err) {
                        alert("è§£æå¤±è´¥");
                    }
                };
                reader.readAsText(file);
            };

            // --- å›¾è¡¨ç»˜åˆ¶ ---
            let chartNetWorth = null;
            let chartComposition = null;

            const renderCharts = () => {
                if (historyData.value.length === 0) return;
                
                const chartData = [...computedHistory.value].sort((a, b) => new Date(a.date) - new Date(b.date));
                const dates = chartData.map(d => d.date);
                const netWorths = chartData.map(d => d.netWorth);
                const totalAssetsData = chartData.map(d => d.totalAssets);
                const totalLiabilitiesData = chartData.map(d => d.totalLiabilities);

                // 1. å‡€å€¼è¶‹åŠ¿å›¾ (é¢ç§¯å›¾)
                if (!chartNetWorth) chartNetWorth = echarts.init(document.getElementById('netWorthChart'));
                chartNetWorth.setOption({
                    title: { text: 'å‡€èµ„äº§ (èµ„äº§ - è´Ÿå€º) èµ°åŠ¿', textStyle: { color: '#fff' } },
                    tooltip: { trigger: 'axis' },
                    legend: { data: ['å‡€èµ„äº§', 'æ€»èµ„äº§', 'æ€»è´Ÿå€º'], textStyle: { color: '#94a3b8' }, top: 'bottom' },
                    grid: { left: '3%', right: '4%', bottom: '10%', containLabel: true },
                    xAxis: { type: 'category', boundaryGap: false, data: dates, axisLabel: { color: '#94a3b8' } },
                    yAxis: { type: 'value', axisLabel: { color: '#94a3b8' }, splitLine: { lineStyle: { color: '#334155' } } },
                    series: [
                        { name: 'å‡€èµ„äº§', type: 'line', smooth: true, data: netWorths, itemStyle: { color: '#3b82f6' }, areaStyle: {} },
                        { name: 'æ€»èµ„äº§', type: 'line', smooth: true, data: totalAssetsData, itemStyle: { color: '#22c55e' } },
                        { name: 'æ€»è´Ÿå€º', type: 'line', smooth: true, data: totalLiabilitiesData, itemStyle: { color: '#ef4444' } },
                    ]
                });

                // 2. èµ„äº§æ„æˆé¥¼å›¾ (ä½¿ç”¨æœ€æ–°çš„è®°å½•)
                if (latestRecord.value) {
                    if (!chartComposition) chartComposition = echarts.init(document.getElementById('compositionChart'));
                    
                    const assetComposition = [];
                    config.value.assetGroups.forEach(g => {
                        g.accounts.forEach(a => {
                            if (latestRecord.value.assets[a.key] > 0) {
                                assetComposition.push({
                                    name: a.name,
                                    value: latestRecord.value.assets[a.key]
                                });
                            }
                        });
                    });

                    chartComposition.setOption({
                        title: { text: 'å½“å‰æ€»èµ„äº§åˆ†å¸ƒ', textStyle: { color: '#fff' } },
                        tooltip: { trigger: 'item' },
                        legend: { type: 'scroll', top: 'bottom', textStyle: { color: '#94a3b8' } },
                        series: [{
                            name: 'èµ„äº§åˆ†å¸ƒ',
                            type: 'pie',
                            radius: ['40%', '70%'],
                            center: ['50%', '45%'],
                            itemStyle: { borderRadius: 10, borderColor: '#1e293b', borderWidth: 2 },
                            data: assetComposition
                        }]
                    });
                }
            };
            
            // ç›‘å¬æ—¥æœŸå˜åŒ–ï¼Œè‡ªåŠ¨åŠ è½½æ•°æ®
            watch(selectedDate, loadInputData);

            onMounted(() => {
                loadData();
                window.addEventListener('resize', () => {
                    chartNetWorth && chartNetWorth.resize();
                    chartComposition && chartComposition.resize();
                });
            });

            return {
                config,
                selectedDate,
                inputData,
                sortedHistory,
                latestTotalAssets,
                latestTotalLiabilities,
                latestNetWorth,
                currentInputAssetsTotal,
                currentInputLiabilitiesTotal,
                // Stats
                dayChange: computed(() => dayStats.value.amount),
                dayChangePct: computed(() => dayStats.value.pct),
                monthChange: computed(() => monthStats.value.amount),
                monthChangePct: computed(() => monthStats.value.pct),
                // Methods
                submitData,
                loadInputData,
                editRecord,
                deleteRecord,
                formatCurrency,
                getDiffClass,
                exportData,
                triggerImport,
                importData,
                clearAll
            };
        }
    }).mount('#app');
</script>
</body>
</html>