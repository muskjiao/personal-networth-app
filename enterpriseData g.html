<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¨å›½ä¼ä¸šæŸ¥è¯¢æ¦œ - åŒºåŸŸä¸è¡Œä¸šç»Ÿè®¡</title>
    <style>
        /* åŸºç¡€æ ·å¼ */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background-color: #f4f7f9; }
        .container { max-width: 1200px; margin: 0 auto; background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        h1 { color: #004d99; text-align: center; margin-bottom: 30px; border-bottom: 3px solid #004d99; padding-bottom: 10px; }

        /* ç­›é€‰åŒºæ ·å¼ */
        .filter-controls { display: flex; gap: 20px; margin-bottom: 20px; background-color: #e9ecef; padding: 15px; border-radius: 6px; }
        .filter-controls label { font-weight: bold; color: #333; }
        .filter-controls select { padding: 8px 12px; border-radius: 4px; border: 1px solid #ccc; font-size: 16px; }

        /* è¡¨æ ¼æ ·å¼ */
        .dashboard-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .dashboard-table th, .dashboard-table td { border: 1px solid #ddd; padding: 12px; text-align: center; }
        .dashboard-table th { background-color: #004d99; color: white; cursor: pointer; }
        .dashboard-table tr:nth-child(even) { background-color: #f8f8f8; }
        .dashboard-table tr:hover { background-color: #e0f7fa; }

        /* çªå‡ºæ˜¾ç¤ºåŒºåŸŸå’Œè¡Œä¸šåç§° */
        .area-name { font-weight: bold; color: #1e88e5; }
        .industry-name { font-style: italic; color: #43a047; }
        .rank-column { font-weight: bold; color: #d32f2f; }
        
        /* äº§å€¼æ ¼å¼åŒ– */
        .value-column { font-family: monospace; }
        
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ† å…¨å›½ä¼ä¸šæŸ¥è¯¢æ¦œ - åŒºåŸŸä¸è¡Œä¸šæ¦‚è§ˆ ğŸ†</h1>
    
    <div class="filter-controls">
        <label for="area-filter">ç­›é€‰åŒºåŸŸ:</label>
        <select id="area-filter">
            <option value="all">å…¨éƒ¨åŒºåŸŸ</option>
            </select>

        <label for="industry-filter">ç­›é€‰è¡Œä¸š:</label>
        <select id="industry-filter">
            <option value="all">å…¨éƒ¨è¡Œä¸š</option>
            </select>
        
        <label for="sort-by">æ’åºä¾æ®:</label>
        <select id="sort-by">
            <option value="quantity_desc">æ•°é‡ (é™åº)</option>
            <option value="quantity_asc">æ•°é‡ (å‡åº)</option>
            <option value="value_desc">äº§å€¼ (é™åº)</option>
            <option value="value_asc">äº§å€¼ (å‡åº)</option>
        </select>
    </div>

    <table class="dashboard-table">
        <thead>
            <tr>
                <th class="rank-column">æ’å</th>
                <th data-sort="area">åŒºåŸŸ</th>
                <th data-sort="industry">è¡Œä¸š</th>
                <th data-sort="quantity" id="header-quantity">ä¼ä¸šæ•°é‡ (å®¶)</th>
                <th data-sort="value" id="header-value">äº§å€¼ (äº¿å…ƒ)</th>
            </tr>
        </thead>
        <tbody id="data-body">
            </tbody>
    </table>
    
    <p style="text-align: right; margin-top: 20px; color: #666;">* æ•°æ®æ¥æºäºæ¨¡æ‹Ÿ/å¤–éƒ¨æ•°æ®åº“ï¼Œä»…ä¾›å‚è€ƒã€‚</p>

</div>

<script>
    // ** 1. æ¨¡æ‹Ÿæ•°æ®ï¼ˆè¿™é‡Œéœ€è¦æ›¿æ¢æˆä»åç«¯APIè·å–çš„çœŸå®æ•°æ®ï¼‰ **
    const rawData = [
        { area: "åä¸œ", industry: "ä¿¡æ¯æŠ€æœ¯", quantity: 85000, value: 5200, rank: 1 },
        { area: "åä¸œ", industry: "é«˜ç«¯åˆ¶é€ ", quantity: 45000, value: 4800, rank: 2 },
        { area: "ååŒ—", industry: "é‡‘èæœåŠ¡", quantity: 32000, value: 3500, rank: 3 },
        { area: "åå—", industry: "é›¶å”®ç”µå•†", quantity: 98000, value: 2900, rank: 4 },
        { area: "åä¸œ", industry: "ç”Ÿç‰©åŒ»è¯", quantity: 28000, value: 2500, rank: 5 },
        { area: "ååŒ—", industry: "ä¿¡æ¯æŠ€æœ¯", quantity: 55000, value: 2200, rank: 6 },
        { area: "åå—", industry: "é«˜ç«¯åˆ¶é€ ", quantity: 38000, value: 1800, rank: 7 },
        { area: "è¥¿å—", industry: "æ—…æ¸¸æ–‡åˆ›", quantity: 62000, value: 1500, rank: 8 },
        { area: "åä¸­", industry: "èƒ½æºåŒ–å·¥", quantity: 18000, value: 1200, rank: 9 },
        { area: "ä¸œåŒ—", industry: "å†œä¸šé£Ÿå“", quantity: 75000, value: 900, rank: 10 }
        // ... æ›´å¤šçœŸå®æ•°æ®
    ];

    let currentData = [...rawData]; // ç”¨äºæ“ä½œå’Œå±•ç¤ºçš„æ•°æ®
    const dataBody = document.getElementById('data-body');
    const areaFilter = document.getElementById('area-filter');
    const industryFilter = document.getElementById('industry-filter');
    const sortByControl = document.getElementById('sort-by');

    // ** 2. å·¥å…·å‡½æ•°ï¼šæ ¼å¼åŒ–äº§å€¼æ•°å­— **
    function formatValue(num) {
        return num.toLocaleString('zh-CN', { style: 'decimal', minimumFractionDigits: 0 });
    }

    // ** 3. æ¸²æŸ“è¡¨æ ¼æ•°æ® **
    function renderTable(data) {
        dataBody.innerHTML = ''; // æ¸…ç©ºç°æœ‰å†…å®¹
        
        // é‡æ–°è®¡ç®—æ’åï¼ˆåŸºäºå½“å‰æ’åºï¼‰
        data.forEach((item, index) => {
            item.rank = index + 1;
        });

        data.forEach(item => {
            const row = dataBody.insertRow();
            row.innerHTML = `
                <td class="rank-column">${item.rank}</td>
                <td class="area-name">${item.area}</td>
                <td class="industry-name">${item.industry}</td>
                <td>${formatValue(item.quantity)}</td>
                <td class="value-column">${formatValue(item.value)}</td>
            `;
        });
    }

    // ** 4. åˆå§‹åŒ–ç­›é€‰å™¨é€‰é¡¹ **
    function initFilters() {
        // æå–ä¸é‡å¤çš„åŒºåŸŸå’Œè¡Œä¸š
        const areas = [...new Set(rawData.map(item => item.area))];
        const industries = [...new Set(rawData.map(item => item.industry))];

        areas.forEach(area => {
            areaFilter.innerHTML += `<option value="${area}">${area}</option>`;
        });

        industries.forEach(industry => {
            industryFilter.innerHTML += `<option value="${industry}">${industry}</option>`;
        });
    }

    // ** 5. æ ¸å¿ƒé€»è¾‘ï¼šç­›é€‰å’Œæ’åº **
    function applyFiltersAndSort() {
        const selectedArea = areaFilter.value;
        const selectedIndustry = industryFilter.value;
        const sortCriteria = sortByControl.value; // e.g., 'quantity_desc'
        const [sortKey, sortOrder] = sortCriteria.split('_');

        // 5.1. ç­›é€‰
        currentData = rawData.filter(item => {
            const areaMatch = selectedArea === 'all' || item.area === selectedArea;
            const industryMatch = selectedIndustry === 'all' || item.industry === selectedIndustry;
            return areaMatch && industryMatch;
        });

        // 5.2. æ’åº
        currentData.sort((a, b) => {
            let comparison = 0;
            if (a[sortKey] > b[sortKey]) {
                comparison = 1;
            } else if (a[sortKey] < b[sortKey]) {
                comparison = -1;
            }
            // æ ¹æ®å‡åº/é™åºè°ƒæ•´æ¯”è¾ƒç»“æœ
            return sortOrder === 'asc' ? comparison : comparison * -1;
        });
        
        // 5.3. é‡æ–°æ¸²æŸ“
        renderTable(currentData);
    }

    // ** 6. äº‹ä»¶ç›‘å¬å™¨ **
    areaFilter.addEventListener('change', applyFiltersAndSort);
    industryFilter.addEventListener('change', applyFiltersAndSort);
    sortByControl.addEventListener('change', applyFiltersAndSort);
    
    // ** 7. åˆå§‹åŒ–å¯åŠ¨ **
    initFilters();
    // é»˜è®¤ä»¥â€œæ•°é‡ (é™åº)â€è¿›è¡Œåˆå§‹æ¸²æŸ“
    applyFiltersAndSort(); 
</script>

</body>
</html>